{"componentChunkName":"component---src-templates-post-js","path":"/posts/making-of-abtesting-scrollmation/","result":{"data":{"markdownRemark":{"html":"<div style=\"text-align:center; margin:5px\">\n<img src=\"/images/posts/hn-bob-post.png\">\n</div>\n<p>Recently, we launched our first ever <a href=\"https://visualwebsiteoptimizer.com/what-is-ab-testing/\">animated guide to A/B testing</a> which made it to the top of <a href=\"https://news.ycombinator.com/item?id=5993914\">HN homepage</a> (Yay!). </p>\n<div style=\"text-align:center; margin:5px\">\n<img src=\"https://phaven-prod.s3.amazonaws.com/files/image_part/asset/956765/Xq0eqxVYXbzyZmOwI4nN5LDsLAw/medium_what.jpg\">\n</div>\n<p>In this post, I'll go through the process of how I created the page using HTML5 and JS. Let's get started! </p>\n<h2 id=\"setting-up-things\" style=\"position:relative;\"><a href=\"#setting-up-things\" aria-label=\"setting up things permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up things</h2>\n<p>I searched about some existing parallax scrolling JS scripts and came across <a href=\"https://github.com/Prinzhorn/skrollr\">Skrollr.js</a> which made my work a piece of cake! If you are going to create your own parallax scrolling page, then I would recommend you to use this library. Apart from that, I also used <a href=\"https://github.com/yckart/jquery.scrollto.js\">scrollTo.js</a> and <a href=\"https://github.com/brandonaaron/jquery-mousewheel\">mousewheel.js</a> for scroll handling.</p>\n<p>Also, I wanted to make the images used in that page look sharp on retina screens so I used a little LESS mixin from <a href=\"http://retinajs.com/\">RetinaJS</a> to make sure that retina screens show the images @2x.</p>\n<h2 id=\"getting-started\" style=\"position:relative;\"><a href=\"#getting-started\" aria-label=\"getting started permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Getting started</h2>\n<p>After looking at some examples of Skrollr, I was ready to start building up the page. The best thing about Skrollr is that it automatically set things up for you and also handles the parallax scrolling on mobile devices. </p>\n<p>Now, I saved two versions (1x and 2x, for retina) of all the images and searched for a good <em>comic</em> font. Each slide on that page is a mixture of some text and image elements. I gave each slide an <code class=\"language-text\">absolute</code> positioning and <code class=\"language-text\">100%</code> width and height. Also, each element in the slides are <code class=\"language-text\">fixed</code> positioned are made to appear and disappear using the <code class=\"language-text\">opacity</code> property. Here's the code for the first slide:</p>\n<p>{% highlight html %}</p>\n  <!-- Slide 1 -->\n  <div class=slide id=slide1>\n    <div class=bob\n      data-0=left: 0%; opacity:0;\n      data-1000=left: 50%; opacity:1;\n      data-3600=left: 50%; opacity:1;\n      data-4800=left: 50%; opacity:0;>\n    </div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;div class=text\n  data-1200=opacity:0; bottom:0%; margin-bottom: 0 \n  data-2400=opacity:1; bottom:50%; margin-bottom: -46px\n  data-3600=opacity:1; bottom:50%; margin-bottom: -46px; right: 50%\n  data-4800=opacity: 0; bottom: 50%; margin-bottom: -48px; right: 0%&gt;\n\n  Meet &lt;strong&gt;Bob&lt;/strong&gt;\n&lt;/div&gt;</code></pre></div>\n  </div>\n{% endhighlight %}\n<p>The only thing that Skrollr needs is the <code class=\"language-text\">data-px</code> attribute with some CSS properties passed in that attribute. Here, Bob will be at 0% left having 0 opacity at the start. Now if the user scrolls to 1000px, s/he would see Bob's image appearing from left to the center with increasing opacity. Thats how it works, you just need to time your animations in terms of pixels and Skrollr will handle it for you. Here, both <code class=\"language-text\">bob</code> and <code class=\"language-text\">text</code> are fixed positioned. To make things responsive, I first positioned everything to center using this:</p>\n<p>{% highlight css %}\n.element {\nwidth: 100px; height: 100px;\nleft: 50%; top: 50%;\nmargin-left: -50px;\nmargin-top: -50px;\n}\n{% endhighlight %}</p>\n<p>After this, I altered the margins to position it perfectly so that on any resolution it will start from the center. I did the same thing for all the elements in each slide. Most of the elements are animated using CSS3 transforms while others are just faded in and out using <code class=\"language-text\">opacity</code> property. </p>\n<h2 id=\"scroll-handling\" style=\"position:relative;\"><a href=\"#scroll-handling\" aria-label=\"scroll handling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scroll handling</h2>\n<p>All this completed 80% of the page. Now, the only thing left was the scroll handling. I had to make sure that on each scroll, a slide should finish the animation properly and should not be left in between. To do this, I created checkpoints of the scroll position where each slide starts/ends. Now on each scroll, I incremented/decremented a counter based on the scroll direction. Based on that counter's current value the page is scrolled to the position from the checkpoints array and any other scroll event is ignored in that duration. Here's the code for this:</p>\n<p>{% highlight js %}\nvar i = 0;\nvar checkpoints = [0, 3600, 6000, 11200, 14800, 17200];\nvar timer = [0, 1000, 1000, 1500, 1500, 1500];</p>\n<p>  function scrollDown() {\nif(i &#x3C; checkpoints.length - 1 &#x26;&#x26; percentage == 100) {\ni++;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  $(html, body).scrollTo(0, checkpoints[i], {\n    animation: {\n      easing: linear,\n      duration: timer[i]\n    }\n  });\n}</code></pre></div>\n<p>  }</p>\n<p>  function scrollUp() {\nif(i > 0)\ni--;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$htmlAndBody.scrollTo(0, checkpoints[i], {\n  animation: {\n    easing: linear,\n    duration: timer[i]\n  }\n});</code></pre></div>\n<p>  }\n{% endhighlight %}</p>\n<p>I also added keyboard navigation, and put some arrows on the page for easier navigation. Also, after getting reviews from some non-technical people, I added the auto-play option so that all the lazy people would still be able to watch the whole presentation without moving a finger :P</p>\n<p>This almost completed the whole page. Last additions were creating a preloader for the page which loaded the images of first 5 slides with a progress bar and then rest of the images are loaded in the background. If you want, you can take a look at the <a href=\"http://visualwebsiteoptimizer.com/what-is-ab-testing/js/preloader.js\">preloader.js</a> to see how I did the preloading. Another thing was the share buttons and showing the count which was retrieved using PHP. </p>\n<p>I hope this covered everything but if you get stuck anywhere, then feel free to add your comments! :)</p>","timeToRead":4,"excerpt":"Recently, we launched our first ever animated guide to A/B testing which made it to the top of HN homepage (Yay!).  In this post, I'll goâ€¦","frontmatter":{"title":"How We Made The Animated A/B Testing Guide","author":"Kushagra Agarwal","authorslug":"kushagra_agarwal"},"fields":{"slug":"/posts/making-of-abtesting-scrollmation/","date":"July 07, 2013"}}},"pageContext":{"slug":"/posts/making-of-abtesting-scrollmation/","date":"2013-07-07T18:30:00.000Z","nexttitle":"jQuery Promises: The answer to PostMessage's asynchrony","nextslug":"/posts/jquery-promises-with-postmessage/","prevtitle":"please.js - A simple PostMessage based communication library","prevslug":"/posts/please-js-release/"}}}