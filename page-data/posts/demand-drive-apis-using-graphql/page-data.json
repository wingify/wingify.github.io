{"componentChunkName":"component---src-templates-post-js","path":"/posts/demand-drive-apis-using-graphql/","result":{"data":{"markdownRemark":{"html":"<h3 id=\"introduction\" style=\"position:relative;\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h3>\n<p>This article will deal with the issues we face with the current API architecture (mostly REST) and why demand-driven APIs seem a perfect replacement for it. We will also talk in brief, about <a href=\"http://graphql.org/learn/\">GraphQL</a> and how it is a feasible solution for implementing demand-driven applications.</p>\n<p>Note: This article is inspired from <a href=\"https://www.slideshare.net/vincirufus/demand-driven-applications-with-graphql-78403822\">Demand driven Applications with GraphQL</a> by <a href=\"https://www.linkedin.com/in/vinci\">Vinci Rufus</a> at <a href=\"http://2017.jschannel.com/\">JS Channel 2017</a>.</p>\n<h3 id=\"why-demand-driven-api-whats-wrong-with-rest\" style=\"position:relative;\"><a href=\"#why-demand-driven-api-whats-wrong-with-rest\" aria-label=\"why demand driven api whats wrong with rest permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why Demand-driven API? What's wrong with REST?</h3>\n<p>Let's take a simple example of author &#x26; articles. If we are given a requirement to develop an API to fetch authors or articles, it will most probably go like this, if we follow REST:</p>\n<ul>\n  <li> GET /authors/:authorId </li>\n  <li> GET /articles/:articleId </li>\n</ul>\n<p>Let's taken an example where we have to show an article snippet on my website's dashboard. We would need its <strong>title, description &#x26; author name</strong>. So we hit the latter end point and it will give a response like:</p>\n<p>{% highlight js %}\n{\ntitle: 'Demand Driven APIs Using GraphQL',\ncreatedAt: '2017-04-25',\nupdatedAt: '2017-08-25',\narticleId: '96',\nauthorId: 50,\nstatus: 'published',\ndescription: 'Lorem Ipsum...'\n}\n{% endhighlight %}</p>\n<p>There are two problems with this response:</p>\n<ol>\n<li><strong>Extra information</strong>: We only needed the <strong>title</strong> &#x26; <strong>description</strong> but we got everything related to the article and we cannot get rid of this extra payload as this extra information might be getting consumed at some other page i.e. Edit Article Page.</li>\n<li><strong>Missing information</strong>: We were expecting <strong>author name</strong> but instead we got <strong>authorId</strong>. This is bad and to solve this we would probably be making another network call on the former end point to get the author name. It's an overhead making 2 network calls just to fetch 3 parameters, don't you think? Also, it will just get more complex as we include more resources i.e. comments, images etc.</li>\n</ol>\n<h3 id=\"how-demand-driven-applications-work\" style=\"position:relative;\"><a href=\"#how-demand-driven-applications-work\" aria-label=\"how demand driven applications work permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How Demand-driven Applications Work?</h3>\n<p>Now that we understand few issues with REST based APIs, we need a smart system which can give me the exact information required instead of giving me partial/extra information.This can be solved if the client demands what it actually needs and server gives it only that piece of information. This can be done using GraphQL.</p>\n<p>Let's try to solve our problem using GraphQL. The exact information that our client need can be represented in GraphQL as:</p>\n<p>{% highlight js %}\n{\narticle (id: articleId)\n{\ntitle,\ndescription,\nauthor {\nname\n}\n}\n}\n{% endhighlight %}</p>\n<p>The server can have a single end point with the following <a href=\"http://graphql.org/learn/schema/\">schema</a>:</p>\n<p>{% highlight js %}</p>\n<p>type Article(id: Integer) {\ntitle: String,\ndescription: String,\nstatus: String,\ncreatedAt: Date,\nupdatedAt: Date,\nstatus: String,\nauthor: Author\n}</p>\n<p>type Author(id: Integer) {\nname: String,\nemail: String,\nphoto: Picture,\nfollowers: [User]\n}</p>\n<p>type Picture(id: Integer) {\nimgPath: String,\nimgHeight: Integer,\nimgWidth: Integer\n}</p>\n<p>{% endhighlight %}</p>\n<p>And each field in our schema can have a function to fetch that piece of information. In our case:</p>\n<p>{% highlight js %}</p>\n<p>  function Article(id) {\nreturn Article.find(id);\n}</p>\n<p>  function Article_title(article) {\nreturn article.title;\n}</p>\n<p>  function Article_description(article) {\nreturn article.description;\n}</p>\n<p>  function Article_author(article) {\nreturn article.author;\n}</p>\n<p>  function Author_name(author) {\nreturn author.name;\n}</p>\n<p>{% endhighlight %}</p>\n<p>On querying the data, we get i.e.</p>\n<p>{% highlight js %}</p>\n<p>curl -XGET <a href=\"http://myapp/articles\">http://myapp/articles</a> -d \"query={\narticle(id: 1) {\ntitle,\ndescription,\nauthor {\nname\n}\n}\n}\"</p>\n<p>{% endhighlight %}</p>\n<p>We will get like this:</p>\n<p>{% highlight js %}\n{\ntitle: 'Demand Driven APIs Using GraphQL',\ndescription: 'Lorem Ipsum...',\nauthor: {\nname: 'Sahil Batla'\n}\n}\n{% endhighlight %}</p>\n<p>This is what we needed, now we can keep the endpoint same and tweak with fields required to display relevant information at any page of our website.</p>\n<h3 id=\"advantages-of-demand-driven-apis\" style=\"position:relative;\"><a href=\"#advantages-of-demand-driven-apis\" aria-label=\"advantages of demand driven apis permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Advantages of Demand-driven APIs</h3>\n<ol>\n<li>Single end point for serving any piece of information.</li>\n<li>Less payload of data as no extra information is served.</li>\n<li>Versioning of APIs become simpler as we can control the exact information required.</li>\n</ol>\n<h3 id=\"disadvantages-of-demand-driven-apis\" style=\"position:relative;\"><a href=\"#disadvantages-of-demand-driven-apis\" aria-label=\"disadvantages of demand driven apis permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantages of Demand-driven APIs</h3>\n<ol>\n<li>Latency may increase due to a single end point handling all the querying of data.</li>\n<li>No lazy loading possible as it's a single call which will contain all the data.</li>\n</ol>\n<h3 id=\"try-it-out\" style=\"position:relative;\"><a href=\"#try-it-out\" aria-label=\"try it out permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Try it Out</h3>\n<p>If you think GraphQL is promising go ahead and try it out. There is much more to it that you will love to learn. Check out its <a href=\"http://graphql.org/learn/\">official documentation</a>. It has been implemented in all the well known languages and you can find it all <a href=\"http://graphql.org/code/\">here</a>.</p>","timeToRead":4,"excerpt":"Introduction This article will deal with the issues we face with the current API architecture (mostly REST) and why demand-driven APIs seemâ€¦","frontmatter":{"title":"Demand-driven APIs Using GraphQL","author":"Sahil Batla","authorslug":"sahilbatla"},"fields":{"slug":"/posts/demand-drive-apis-using-graphql/","date":"August 30, 2017"}}},"pageContext":{"slug":"/posts/demand-drive-apis-using-graphql/","date":"2017-08-30T18:30:00.000Z","nexttitle":"Wingify's First Internal CTF","nextslug":"/posts/wingify-capture-the-flag/","prevtitle":"PyData at Wingify - My Experience","prevslug":"/posts/wingify-pydata-at-wingify/"}}}